# Product Brief: Подробный калькулятор

## Обзор

| | |
|---|---|
| **Название** | Подробный калькулятор стоимости печати |
| **Тип** | Web-приложение |
| **Приоритет** | P0 (критический) |
| **Срок MVP** | 26.12.2024 |

---

## Проблема

Для точного расчёта стоимости 3D-печати нужно:
1. Получить STL-файл от клиента
2. Определить объём модели
3. Выбрать технологию и материал
4. Рассчитать по формуле с учётом всех параметров

**Сейчас:** Excel + ручной расчёт объёма + формулы в голове = долго и с ошибками.

---

## Решение

Web-приложение, которое:
1. Принимает STL-файл (drag & drop)
2. Автоматически считает объём
3. Даёт выбор технологии (FDM/SLA/SLS/SLM)
4. Рассчитывает стоимость по настроенным тарифам
5. Сохраняет расчёт в БД

---

## Пользователи

| Роль | Задача | Частота |
|------|--------|---------|
| Инженер-технолог | Точный расчёт для КП | 5-10 раз/день |
| Менеджер | Расчёт для ответа клиенту | 3-5 раз/день |

---

## Функциональные требования

### MVP (к 26.12)

#### Загрузка и анализ STL
- [ ] Drag & drop загрузка
- [ ] Поддержка binary и ASCII STL
- [ ] Множественная загрузка файлов
- [ ] Автоматический расчёт объёма (см³)
- [ ] Отображение имени файла

#### Расчёт стоимости
- [ ] Выбор технологии: FDM, SLA, SLS, SLM
- [ ] Ввод тарифа (₽/см³) или выбор из предустановок
- [ ] Формула: `Цена = Тариф × Объём × Коэффициенты`
- [ ] Редактируемое количество
- [ ] Итоговая сумма

#### Таблица моделей
- [ ] Список загруженных моделей
- [ ] Сортировка по колонкам
- [ ] Удаление модели
- [ ] Экспорт (копирование для Google Sheets)

#### Сохранение
- [ ] Привязка к клиенту
- [ ] Сохранение расчёта в БД
- [ ] Просмотр истории расчётов

### v1.0 (к 06.01)
- [ ] Предустановки материалов для каждой технологии
- [ ] Расширенные параметры (поддержки, постобработка)
- [ ] Генерация PDF

### Будущее
- [ ] Загрузка STEP/3MF
- [ ] Автоопределение ориентации
- [ ] Оценка времени печати

---

## Формулы расчёта

### Базовая формула
```
Цена = Объём × Тариф × КоэфТехнологии × КоэфСложности
```

### Коэффициенты по технологиям

| Технология | Базовый тариф | Особенности |
|------------|---------------|-------------|
| FDM | 3-15 ₽/см³ | + стоимость поддержек |
| SLA | 15-40 ₽/см³ | + стоимость смолы |
| SLS | 30-80 ₽/см³ | нет поддержек |
| SLM | 80-300 ₽/см³ | + постобработка |

---

## Пользовательский путь

```
1. Открывает приложение
2. Выбирает/создаёт клиента
3. Загружает STL-файлы (drag & drop)
4. Видит таблицу с объёмами
5. Выбирает технологию
6. Устанавливает тариф (или использует предустановку)
7. Корректирует количество
8. Видит итоговую стоимость
9. Сохраняет расчёт
10. Копирует для КП или экспортирует
```

---

## UI/UX требования

- Тёмная тема (текущий дизайн)
- Адаптивность (работает на планшете)
- Быстрая загрузка (< 2 сек)
- Drag & drop с визуальной обратной связью
- Клавиатурная навигация

---

## Метрики успеха

| Метрика | Цель |
|---------|------|
| Время расчёта | < 3 минуты |
| Ошибок в расчётах | 0% |
| Сохранённых расчётов | 100% |

---

## Технические зависимости

- API: `/api/quotes`, `/api/clients`
- БД: таблицы `quotes`, `clients`, `materials`
- STL Parser: текущий (перенести в shared)

---

## Открытые вопросы

1. Нужна ли авторизация для MVP?
2. Какие предустановки материалов добавить?
3. Формат экспорта КП?

---

*Автор: [Имя]*
*Дата: 10.12.2024*

